import{A as e,C as t,E as n,M as r,N as i,O as a,_ as o,c as s,d as c,f as l,g as u,h as d,j as f,m as p,o as m,p as h,s as g,u as _,v,w as y,x as ee,y as b}from"./index-D-ACJEW6.js";var x={name:`TeacherFileQuery`,setup(){let t=m(),r=e(``),i=e(`all`),a=e(`all`),o=e(`all`),s=e(!1),c=e(``),l=e(``),u=e(``),d=e(``),f=e([`active`,`archived`]),h=e([`pdf`,`doc`,`xls`,`jpg`]),g=e(`createDate`),_=e(`desc`),v=e(1),y=e(10),b=e(`list`),x=e([]),S=e(!1),C=e(!1),w=e(null),T=e({fileName:``,fileType:`student_profile`,selectedCourses:[],selectedStudents:[],description:``,selectedFile:null}),te=e([{id:1,name:`数据结构`,code:`CS201`},{id:2,name:`算法分析`,code:`CS202`},{id:3,name:`数据库原理`,code:`CS203`},{id:4,name:`操作系统`,code:`CS301`},{id:5,name:`计算机网络`,code:`CS302`}]),E=e([{id:1,name:`张三`,studentId:`2023001`},{id:2,name:`李四`,studentId:`2023002`},{id:3,name:`王五`,studentId:`2023003`},{id:4,name:`赵六`,studentId:`2023004`},{id:5,name:`孙七`,studentId:`2023005`},{id:6,name:`周八`,studentId:`2023006`},{id:7,name:`吴九`,studentId:`2023007`},{id:8,name:`郑十`,studentId:`2023008`}]),D=e([2024,2023,2022,2021,2020]),O=e([{id:1,name:`张三学员档案`,code:`SD-2023001-001`,fileType:`student_profile`,format:`pdf`,size:2048e3,createDate:`2023-01-15`,updateDate:`2023-06-20`,status:`active`,courses:[{id:1,name:`数据结构`},{id:2,name:`算法分析`}],students:[{id:1,name:`张三`}]},{id:2,name:`数据结构课程出勤记录`,code:`AR-CS201-2023`,fileType:`attendance_record`,format:`xls`,size:512e3,createDate:`2023-01-10`,updateDate:`2023-12-30`,status:`active`,courses:[{id:1,name:`数据结构`}],students:[{id:1,name:`张三`},{id:3,name:`王五`},{id:5,name:`孙七`},{id:7,name:`吴九`}]},{id:3,name:`第一学期成绩报告`,code:`PR-2023-01`,fileType:`performance_report`,format:`pdf`,size:3072e3,createDate:`2023-07-05`,updateDate:`2023-07-05`,status:`active`,courses:[{id:1,name:`数据结构`},{id:2,name:`算法分析`},{id:3,name:`数据库原理`}],students:[{id:1,name:`张三`},{id:2,name:`李四`},{id:3,name:`王五`},{id:4,name:`赵六`},{id:5,name:`孙七`}]},{id:4,name:`VIP学员服务合同`,code:`CT-2023001`,fileType:`contract`,format:`pdf`,size:1536e3,createDate:`2023-01-01`,updateDate:`2023-01-01`,status:`archived`,courses:[],students:[{id:1,name:`张三`},{id:4,name:`赵六`}]},{id:5,name:`算法课程结课证书`,code:`CF-2023-001`,fileType:`certificate`,format:`jpg`,size:4096e3,createDate:`2023-12-25`,updateDate:`2023-12-25`,status:`active`,courses:[{id:2,name:`算法分析`}],students:[{id:2,name:`李四`},{id:4,name:`赵六`}]},{id:6,name:`课程教学大纲`,code:`OT-CS203-2023`,fileType:`other`,format:`doc`,size:768e3,createDate:`2023-02-01`,updateDate:`2023-02-10`,status:`active`,courses:[{id:3,name:`数据库原理`}],students:[]},{id:7,name:`李四学员档案`,code:`SD-2023002-001`,fileType:`student_profile`,format:`pdf`,size:256e4,createDate:`2023-02-20`,updateDate:`2023-09-15`,status:`active`,courses:[{id:2,name:`算法分析`},{id:3,name:`数据库原理`}],students:[{id:2,name:`李四`}]},{id:8,name:`操作系统课程出勤记录`,code:`AR-CS301-2023`,fileType:`attendance_record`,format:`xls`,size:409600,createDate:`2023-03-01`,updateDate:`2023-11-10`,status:`active`,courses:[{id:4,name:`操作系统`}],students:[{id:4,name:`赵六`},{id:6,name:`周八`},{id:8,name:`郑十`}]},{id:9,name:`第二学期成绩报告`,code:`PR-2023-02`,fileType:`performance_report`,format:`pdf`,size:3584e3,createDate:`2023-12-20`,updateDate:`2023-12-20`,status:`draft`,courses:[{id:4,name:`操作系统`},{id:5,name:`计算机网络`}],students:[{id:2,name:`李四`},{id:4,name:`赵六`},{id:6,name:`周八`},{id:8,name:`郑十`}]},{id:10,name:`计算机网络课程教学计划`,code:`OT-CS302-2023`,fileType:`other`,format:`doc`,size:1024e3,createDate:`2023-01-15`,updateDate:`2023-01-20`,status:`active`,courses:[{id:5,name:`计算机网络`}],students:[]}]),k=p(()=>{let e=[...O.value];if(r.value){let t=r.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.code.toLowerCase().includes(t)||e.students.some(e=>e.name.toLowerCase().includes(t)))}if(i.value!==`all`&&(e=e.filter(e=>e.fileType===i.value)),a.value!==`all`&&(e=e.filter(e=>e.courses.some(e=>e.id===parseInt(a.value)))),o.value!==`all`){let t=o.value;e=e.filter(e=>new Date(e.createDate).getFullYear()===t)}return f.value.length>0&&(e=e.filter(e=>f.value.includes(e.status))),h.value.length>0&&(e=e.filter(e=>h.value.includes(e.format))),c.value&&(e=e.filter(e=>e.createDate>=c.value)),l.value&&(e=e.filter(e=>e.createDate<=l.value)),u.value&&(e=e.filter(e=>e.updateDate>=u.value)),d.value&&(e=e.filter(e=>e.updateDate<=d.value)),e}),A=p(()=>{let e=[...k.value];return e.sort((e,t)=>{let n,r;switch(g.value){case`name`:n=e.name,r=t.name;break;case`createDate`:n=e.createDate,r=t.createDate;break;case`updateDate`:n=e.updateDate,r=t.updateDate;break;case`size`:n=e.size,r=t.size;break;case`fileType`:n=e.fileType,r=t.fileType;break;default:return 0}return _.value===`asc`?n>r?1:-1:n<r?1:-1}),e}),ne=p(()=>{let e=(v.value-1)*y.value,t=e+y.value;return A.value.slice(e,t)}),j=p(()=>Math.ceil(k.value.length/y.value)),M=p(()=>{let e=[],t=j.value,n=v.value;for(let r=Math.max(1,n-3);r<=Math.min(t,n+3);r++)e.push(r);return e}),re=p(()=>O.value.length),N=p(()=>O.value.reduce((e,t)=>e+t.size,0)),ie=p(()=>Z(N.value)),ae=p(()=>O.value.filter(e=>e.fileType===`student_profile`).length),oe=p(()=>O.value.filter(e=>e.fileType===`attendance_record`).length),se=p(()=>O.value.filter(e=>e.fileType===`performance_report`).length),P=p(()=>T.value.fileName&&T.value.selectedFile&&T.value.fileType),F=null,I=()=>{F&&clearTimeout(F),F=setTimeout(()=>{L()},300)},L=()=>{v.value=1,S.value=!1,x.value=[]},R=()=>{r.value=``,i.value=`all`,a.value=`all`,o.value=`all`,c.value=``,l.value=``,u.value=``,d.value=``,v.value=1,S.value=!1,x.value=[]},z=()=>{s.value=!s.value},B=()=>{_.value=_.value===`asc`?`desc`:`asc`},V=()=>{v.value=1},H=()=>{S.value?x.value=A.value.map(e=>e.id):x.value=[]},U=()=>{x.value=[],S.value=!1},W=e=>{alert(`查看文件功能开发中... 选中文件ID: ${e}`)},G=e=>{alert(`文件详情：\n名称: ${e.name}\n编号: ${e.code}\n类型: ${Q(e.fileType)}\n大小: ${Z(e.size)}\n创建日期: ${X(e.createDate)}\n状态: ${$(e.status)}`)},K=e=>{i.value=e,L()},q=e=>{f.value.includes(e)||(f.value=[e],L())},J=(e,t)=>{alert(`查看课程详情：\n课程ID: ${e}\n课程名称: ${t}`)},ce=e=>{let t=e.map(e=>e.name).join(`
`);alert(`所有相关课程：\n${t}`)},le=(e,t)=>{alert(`查看学员详情：\n学员ID: ${e}\n学员姓名: ${t}`)},ue=e=>{let t=e.map(e=>e.name).join(`
`);alert(`所有相关学员：\n${t}`)},de=e=>{g.value===e?B():(g.value=e,_.value=`asc`)},fe=e=>{alert(`下载文件功能开发中... 选中文件ID: ${e}`)},pe=e=>{alert(`更新文件功能开发中... 选中文件ID: ${e}`)},me=()=>{alert(`批量下载 ${x.value.length} 个文件功能开发中...`)},he=()=>{alert(`批量归档 ${x.value.length} 个文件功能开发中...`)},ge=()=>{C.value=!0,T.value={fileName:``,fileType:`student_profile`,selectedCourses:[],selectedStudents:[],description:``,selectedFile:null}},Y=()=>{C.value=!1,T.value.selectedFile=null},_e=()=>{w.value&&w.value.click()},ve=e=>{e.target.files&&e.target.files[0]&&(T.value.selectedFile=e.target.files[0])},ye=()=>{P.value&&(alert(`文件 "${T.value.fileName}" 上传成功！`),Y())},X=e=>{if(!e)return`-`;let t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}-${String(t.getDate()).padStart(2,`0`)}`},Z=e=>{if(e===0)return`0 Bytes`;let t=1024,n=[`Bytes`,`KB`,`MB`,`GB`,`TB`],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/t**+r).toFixed(2))+` `+n[r]},Q=e=>({student_profile:`学员档案`,attendance_record:`出勤记录`,performance_report:`成绩报告`,contract:`合同文件`,certificate:`证书文件`,other:`其他文件`})[e]||`未知类型`,$=e=>({active:`活跃`,archived:`已归档`,draft:`草稿`})[e]||`未知`;return n(x,e=>{e.length===A.value.length&&A.value.length>0?S.value=!0:S.value=!1}),ee(()=>{localStorage.getItem(`userToken`)||(localStorage.setItem(`userToken`,`mock-token-teacher-789`),localStorage.setItem(`userRole`,`teacher`))}),{searchQuery:r,selectedFileType:i,selectedCourse:a,selectedYear:o,showAdvancedFilters:s,createStartDate:c,createEndDate:l,updateStartDate:u,updateEndDate:d,selectedStatuses:f,selectedFormats:h,sortBy:g,sortOrder:_,currentPage:v,pageSize:y,viewMode:b,selectedFiles:x,selectAll:S,showUploadModal:C,fileInput:w,uploadForm:T,courses:te,students:E,availableYears:D,files:O,filteredFiles:k,sortedFiles:A,paginatedFiles:ne,totalPages:j,visiblePages:M,totalFiles:re,totalSizeFormatted:ie,studentProfiles:ae,attendanceRecords:oe,performanceReports:se,isUploadFormValid:P,debouncedSearch:I,applyFilters:L,resetFilters:R,toggleAdvancedFilters:z,toggleSortOrder:B,sortFiles:V,toggleSelectAll:H,clearSelection:U,viewFile:W,viewFileDetails:G,filterByFileType:K,filterByStatus:q,viewCourseDetails:J,viewAllCourses:ce,viewStudentDetails:le,viewAllStudents:ue,sortByColumn:de,downloadFile:fe,updateFile:pe,batchDownload:me,batchArchive:he,uploadNewFile:ge,closeUploadModal:Y,triggerFileSelect:_e,handleFileSelect:ve,submitUpload:ye,formatDate:X,formatFileSize:Z,getFileTypeText:Q,getStatusText:$,getFormatText:e=>({pdf:`PDF`,doc:`Word`,xls:`Excel`,jpg:`图片`,other:`其他`})[e]||`未知`,getFileIcon:(e,t)=>{let n={pdf:`📄`,doc:`📝`,xls:`📊`,jpg:`🖼️`,student_profile:`👤`,attendance_record:`📅`,performance_report:`📈`,contract:`📑`,certificate:`🏆`,other:`📁`};return n[t]||n[e]||`📄`},getAvatarColor:e=>{let t=[`#667eea`,`#764ba2`,`#f093fb`,`#f5576c`,`#4facfe`,`#00f2fe`,`#00f5d4`,`#43e97b`],n=e.charCodeAt(0)%t.length;return t[n]},getInitial:e=>e.charAt(0),goBack:()=>{t.push(`/home/teacher/dashboard`)}}}},S={class:`teacher-file-query`},C={class:`page-header`},w={class:`file-query-container`},T={class:`search-filter-section`},te={class:`search-controls`},E={class:`search-input-wrapper`},D={class:`filter-dropdowns`},O=[`value`],k=[`value`],A={class:`action-buttons`},ne={key:0,class:`advanced-filters`},j={class:`filter-grid`},M={class:`filter-item`},re={class:`date-inputs`},N={class:`filter-item`},ie={class:`date-inputs`},ae={class:`filter-item`},oe={class:`checkbox-group`},se={class:`checkbox-item`},P={class:`checkbox-item`},F={class:`checkbox-item`},I={class:`filter-item`},L={class:`checkbox-group`},R={class:`checkbox-item`},z={class:`checkbox-item`},B={class:`checkbox-item`},V={class:`checkbox-item`},H={class:`checkbox-item`},U={class:`advanced-actions`},W={class:`statistics-overview`},G={class:`stat-item`},K={class:`stat-value`},q={class:`stat-item`},J={class:`stat-value`},ce={class:`stat-item`},le={class:`stat-value`},ue={class:`stat-item`},de={class:`stat-value`},fe={class:`stat-item`},pe={class:`stat-value`},me={class:`files-list`},he={class:`list-header`},ge={class:`header-info`},Y={class:`result-count`},_e={class:`sort-controls`},ve={class:`view-toggle`},ye={key:0,class:`files-table`},X={class:`table-header`},Z={class:`header-cell`},Q={class:`table-body`},$={class:`table-cell`},be=[`value`],xe={class:`table-cell`},Se=[`onClick`],Ce={class:`file-icon`},we={class:`file-name-info`},Te={class:`file-name clickable`},Ee={class:`file-code`},De={class:`table-cell`},Oe=[`onClick`],ke={class:`table-cell`},Ae=[`onClick`],je=[`onClick`],Me={class:`table-cell`},Ne=[`onClick`],Pe=[`onClick`],Fe={class:`table-cell`},Ie=[`onClick`],Le={class:`table-cell`},Re={class:`action-buttons-group`},ze=[`onClick`],Be=[`onClick`],Ve=[`onClick`],He={class:`pagination`},Ue={class:`page-info`},We={class:`page-controls`},Ge=[`disabled`],Ke=[`onClick`],qe=[`disabled`],Je={key:1,class:`files-grid`},Ye={class:`card-header`},Xe={class:`file-icon-large`},Ze={class:`file-card-header-info`},Qe={class:`file-name-large`},$e={class:`file-code-large`},et={class:`card-header-actions`},tt=[`value`],nt={class:`card-body`},rt={class:`info-grid`},it={class:`info-item`},at={class:`type-badge`},ot={class:`info-item`},st={class:`info-value`},ct={class:`info-item`},lt={class:`info-item`},ut={class:`info-value`},dt={key:0,class:`courses-section`},ft={class:`courses-list`},pt={key:1,class:`students-section`},mt={class:`students-avatars`},ht=[`title`],gt={key:0,class:`more-avatars`},_t={class:`dates-section`},vt={class:`date-item`},yt={class:`date-value`},bt={class:`date-item`},xt={class:`date-value`},St={class:`card-footer`},Ct={class:`card-actions`},wt=[`onClick`],Tt=[`onClick`],Et=[`onClick`],Dt={key:0,class:`batch-operations`},Ot={class:`selected-info`},kt={class:`batch-actions`},At={class:`modal-content`},jt={class:`modal-header`},Mt={class:`modal-body`},Nt={class:`form-group`},Pt={class:`form-group`},Ft={class:`form-group`},It=[`value`],Lt={class:`form-group`},Rt=[`value`],zt={class:`form-group`},Bt={class:`form-group`},Vt={class:`file-upload-area`},Ht={key:0,class:`upload-text`},Ut={key:1,class:`upload-text`},Wt={class:`modal-footer`},Gt=[`disabled`];function Kt(e,n,p,m,g,ee){return t(),o(`div`,S,[d(`div`,C,[d(`button`,{class:`back-button`,onClick:n[0]||=(...e)=>m.goBack&&m.goBack(...e)},`← 返回仪表盘`),n[53]||=d(`h2`,null,`档案资料查询`,-1)]),d(`div`,w,[d(`div`,T,[d(`div`,te,[d(`div`,E,[a(d(`input`,{type:`text`,"onUpdate:modelValue":n[1]||=e=>m.searchQuery=e,onInput:n[2]||=(...e)=>m.debouncedSearch&&m.debouncedSearch(...e),placeholder:`搜索档案名称/编号/相关学员`,class:`search-input`},null,544),[[c,m.searchQuery]]),n[54]||=d(`div`,{class:`search-icon`},`🔍`,-1)]),d(`div`,D,[a(d(`select`,{"onUpdate:modelValue":n[3]||=e=>m.selectedFileType=e,onChange:n[4]||=(...e)=>m.applyFilters&&m.applyFilters(...e),class:`filter-select`},[...n[55]||=[v(`<option value="all" data-v-b6d87d4c>所有类型</option><option value="student_profile" data-v-b6d87d4c>学员档案</option><option value="attendance_record" data-v-b6d87d4c>出勤记录</option><option value="performance_report" data-v-b6d87d4c>成绩报告</option><option value="contract" data-v-b6d87d4c>合同文件</option><option value="certificate" data-v-b6d87d4c>证书文件</option><option value="other" data-v-b6d87d4c>其他文件</option>`,7)]],544),[[_,m.selectedFileType]]),a(d(`select`,{"onUpdate:modelValue":n[5]||=e=>m.selectedCourse=e,onChange:n[6]||=(...e)=>m.applyFilters&&m.applyFilters(...e),class:`filter-select`},[n[56]||=d(`option`,{value:`all`},`所有课程`,-1),(t(!0),o(h,null,y(m.courses,e=>(t(),o(`option`,{key:e.id,value:e.id},i(e.name),9,O))),128))],544),[[_,m.selectedCourse]]),a(d(`select`,{"onUpdate:modelValue":n[7]||=e=>m.selectedYear=e,onChange:n[8]||=(...e)=>m.applyFilters&&m.applyFilters(...e),class:`filter-select`},[n[57]||=d(`option`,{value:`all`},`所有年份`,-1),(t(!0),o(h,null,y(m.availableYears,e=>(t(),o(`option`,{key:e,value:e},i(e)+`年 `,9,k))),128))],544),[[_,m.selectedYear]])]),d(`div`,A,[d(`button`,{class:`action-button`,onClick:n[9]||=(...e)=>m.resetFilters&&m.resetFilters(...e)},`重置筛选`),d(`button`,{class:`action-button primary`,onClick:n[10]||=(...e)=>m.uploadNewFile&&m.uploadNewFile(...e)},`上传文件`)])]),m.showAdvancedFilters?(t(),o(`div`,ne,[d(`div`,j,[d(`div`,M,[n[59]||=d(`label`,null,`创建日期范围`,-1),d(`div`,re,[a(d(`input`,{type:`date`,"onUpdate:modelValue":n[11]||=e=>m.createStartDate=e},null,512),[[c,m.createStartDate]]),n[58]||=d(`span`,null,`至`,-1),a(d(`input`,{type:`date`,"onUpdate:modelValue":n[12]||=e=>m.createEndDate=e},null,512),[[c,m.createEndDate]])])]),d(`div`,N,[n[61]||=d(`label`,null,`更新日期范围`,-1),d(`div`,ie,[a(d(`input`,{type:`date`,"onUpdate:modelValue":n[13]||=e=>m.updateStartDate=e},null,512),[[c,m.updateStartDate]]),n[60]||=d(`span`,null,`至`,-1),a(d(`input`,{type:`date`,"onUpdate:modelValue":n[14]||=e=>m.updateEndDate=e},null,512),[[c,m.updateEndDate]])])]),d(`div`,ae,[n[65]||=d(`label`,null,`文件状态`,-1),d(`div`,oe,[d(`label`,se,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[15]||=e=>m.selectedStatuses=e,value:`active`},null,512),[[s,m.selectedStatuses]]),n[62]||=b(` 活跃 `,-1)]),d(`label`,P,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[16]||=e=>m.selectedStatuses=e,value:`archived`},null,512),[[s,m.selectedStatuses]]),n[63]||=b(` 已归档 `,-1)]),d(`label`,F,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[17]||=e=>m.selectedStatuses=e,value:`draft`},null,512),[[s,m.selectedStatuses]]),n[64]||=b(` 草稿 `,-1)])])]),d(`div`,I,[n[71]||=d(`label`,null,`文件格式`,-1),d(`div`,L,[d(`label`,R,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[18]||=e=>m.selectedFormats=e,value:`pdf`},null,512),[[s,m.selectedFormats]]),n[66]||=b(` PDF `,-1)]),d(`label`,z,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[19]||=e=>m.selectedFormats=e,value:`doc`},null,512),[[s,m.selectedFormats]]),n[67]||=b(` Word `,-1)]),d(`label`,B,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[20]||=e=>m.selectedFormats=e,value:`xls`},null,512),[[s,m.selectedFormats]]),n[68]||=b(` Excel `,-1)]),d(`label`,V,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[21]||=e=>m.selectedFormats=e,value:`jpg`},null,512),[[s,m.selectedFormats]]),n[69]||=b(` 图片 `,-1)]),d(`label`,H,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[22]||=e=>m.selectedFormats=e,value:`other`},null,512),[[s,m.selectedFormats]]),n[70]||=b(` 其他 `,-1)])])])]),d(`div`,U,[d(`button`,{class:`action-button secondary`,onClick:n[23]||=(...e)=>m.applyFilters&&m.applyFilters(...e)},`应用筛选`)])])):u(``,!0),d(`button`,{class:`advanced-filter-toggle`,onClick:n[24]||=(...e)=>m.toggleAdvancedFilters&&m.toggleAdvancedFilters(...e)},i(m.showAdvancedFilters?`收起高级筛选`:`展开高级筛选`),1)]),d(`div`,W,[d(`div`,G,[d(`div`,K,i(m.totalFiles),1),n[72]||=d(`div`,{class:`stat-label`},`总文件数`,-1)]),d(`div`,q,[d(`div`,J,i(m.totalSizeFormatted),1),n[73]||=d(`div`,{class:`stat-label`},`总文件大小`,-1)]),d(`div`,ce,[d(`div`,le,i(m.studentProfiles),1),n[74]||=d(`div`,{class:`stat-label`},`学员档案`,-1)]),d(`div`,ue,[d(`div`,de,i(m.attendanceRecords),1),n[75]||=d(`div`,{class:`stat-label`},`出勤记录`,-1)]),d(`div`,fe,[d(`div`,pe,i(m.performanceReports),1),n[76]||=d(`div`,{class:`stat-label`},`成绩报告`,-1)])]),d(`div`,me,[d(`div`,he,[d(`div`,ge,[n[77]||=d(`h3`,null,`档案列表`,-1),d(`span`,Y,`共 `+i(m.filteredFiles.length)+` 条结果`,1)]),d(`div`,_e,[n[79]||=d(`label`,null,`排序方式：`,-1),a(d(`select`,{"onUpdate:modelValue":n[25]||=e=>m.sortBy=e,onChange:n[26]||=(...e)=>m.sortFiles&&m.sortFiles(...e),class:`sort-select`},[...n[78]||=[v(`<option value="name" data-v-b6d87d4c>按名称</option><option value="createDate" data-v-b6d87d4c>按创建日期</option><option value="updateDate" data-v-b6d87d4c>按更新日期</option><option value="size" data-v-b6d87d4c>按文件大小</option><option value="fileType" data-v-b6d87d4c>按文件类型</option>`,5)]],544),[[_,m.sortBy]]),d(`button`,{class:`sort-order-button`,onClick:n[27]||=(...e)=>m.toggleSortOrder&&m.toggleSortOrder(...e)},i(m.sortOrder===`asc`?`↑`:`↓`),1)])]),d(`div`,ve,[d(`button`,{class:f([`view-button`,{active:m.viewMode===`list`}]),onClick:n[28]||=e=>m.viewMode=`list`},` 列表视图 `,2),d(`button`,{class:f([`view-button`,{active:m.viewMode===`grid`}]),onClick:n[29]||=e=>m.viewMode=`grid`},` 网格视图 `,2)]),m.viewMode===`list`?(t(),o(`div`,ye,[d(`div`,X,[d(`div`,Z,[a(d(`input`,{type:`checkbox`,"onUpdate:modelValue":n[30]||=e=>m.selectAll=e,onChange:n[31]||=(...e)=>m.toggleSelectAll&&m.toggleSelectAll(...e)},null,544),[[s,m.selectAll]])]),n[80]||=v(`<div class="header-cell" data-v-b6d87d4c>文件信息</div><div class="header-cell" data-v-b6d87d4c>文件类型</div><div class="header-cell" data-v-b6d87d4c>相关课程</div><div class="header-cell" data-v-b6d87d4c>相关学员</div><div class="header-cell" data-v-b6d87d4c>文件大小</div><div class="header-cell" data-v-b6d87d4c>创建日期</div><div class="header-cell" data-v-b6d87d4c>更新日期</div><div class="header-cell" data-v-b6d87d4c>状态</div><div class="header-cell" data-v-b6d87d4c>操作</div>`,9)]),d(`div`,Q,[(t(!0),o(h,null,y(m.paginatedFiles,e=>(t(),o(`div`,{key:e.id,class:f([`table-row`,{selected:m.selectedFiles.includes(e.id)}])},[d(`div`,$,[a(d(`input`,{type:`checkbox`,value:e.id,"onUpdate:modelValue":n[32]||=e=>m.selectedFiles=e},null,8,be),[[s,m.selectedFiles]])]),d(`div`,xe,[d(`div`,{class:`file-basic-info`,onClick:t=>m.viewFileDetails(e)},[d(`div`,Ce,i(m.getFileIcon(e.fileType,e.format)),1),d(`div`,we,[d(`div`,Te,i(e.name),1),d(`div`,Ee,`编号: `+i(e.code),1)])],8,Se)]),d(`div`,De,[d(`span`,{class:`type-badge clickable`,onClick:t=>m.filterByFileType(e.fileType)},i(m.getFileTypeText(e.fileType)),9,Oe)]),d(`div`,ke,[(t(!0),o(h,null,y(e.courses.slice(0,2),(e,n)=>(t(),o(`div`,{key:e.id,class:`course-tag clickable`,onClick:l(t=>m.viewCourseDetails(e.id,e.name),[`stop`])},i(e.name),9,Ae))),128)),e.courses.length>2?(t(),o(`div`,{key:0,class:`more-courses clickable`,onClick:l(t=>m.viewAllCourses(e.courses),[`stop`])},` +`+i(e.courses.length-2)+` 更多 `,9,je)):u(``,!0)]),d(`div`,Me,[(t(!0),o(h,null,y(e.students.slice(0,2),(e,n)=>(t(),o(`div`,{key:e.id,class:`student-tag clickable`,onClick:l(t=>m.viewStudentDetails(e.id,e.name),[`stop`])},i(e.name),9,Ne))),128)),e.students.length>2?(t(),o(`div`,{key:0,class:`more-students clickable`,onClick:l(t=>m.viewAllStudents(e.students),[`stop`])},` +`+i(e.students.length-2)+` 更多 `,9,Pe)):u(``,!0)]),d(`div`,{class:`table-cell clickable`,onClick:n[33]||=e=>m.sortByColumn(`size`)},i(m.formatFileSize(e.size)),1),d(`div`,{class:`table-cell clickable`,onClick:n[34]||=e=>m.sortByColumn(`createDate`)},i(m.formatDate(e.createDate)),1),d(`div`,{class:`table-cell clickable`,onClick:n[35]||=e=>m.sortByColumn(`updateDate`)},i(m.formatDate(e.updateDate)),1),d(`div`,Fe,[d(`span`,{class:f([`status-badge clickable`,`status-${e.status}`]),onClick:t=>m.filterByStatus(e.status)},i(m.getStatusText(e.status)),11,Ie)]),d(`div`,Le,[d(`div`,Re,[d(`button`,{class:`action-button small`,onClick:t=>m.viewFile(e.id)},` 查看 `,8,ze),d(`button`,{class:`action-button small`,onClick:t=>m.downloadFile(e.id)},` 下载 `,8,Be),d(`button`,{class:`action-button small`,onClick:t=>m.updateFile(e.id)},` 更新 `,8,Ve)])])],2))),128))]),d(`div`,He,[d(`div`,Ue,` 显示 `+i(Math.min((m.currentPage-1)*m.pageSize+1,m.filteredFiles.length))+` - `+i(Math.min(m.currentPage*m.pageSize,m.filteredFiles.length))+` 条，共 `+i(m.filteredFiles.length)+` 条 `,1),d(`div`,We,[d(`button`,{class:`page-button`,disabled:m.currentPage===1,onClick:n[36]||=e=>m.currentPage--},` 上一页 `,8,Ge),(t(!0),o(h,null,y(m.visiblePages,e=>(t(),o(`button`,{key:e,class:f([`page-button`,{active:e===m.currentPage}]),onClick:t=>m.currentPage=e},i(e),11,Ke))),128)),d(`button`,{class:`page-button`,disabled:m.currentPage===m.totalPages,onClick:n[37]||=e=>m.currentPage++},` 下一页 `,8,qe)])])])):(t(),o(`div`,Je,[(t(!0),o(h,null,y(m.paginatedFiles,e=>(t(),o(`div`,{key:e.id,class:f([`file-card`,{selected:m.selectedFiles.includes(e.id)}])},[d(`div`,Ye,[d(`div`,Xe,i(m.getFileIcon(e.fileType,e.format)),1),d(`div`,Ze,[d(`div`,Qe,i(e.name),1),d(`div`,$e,`编号: `+i(e.code),1)]),d(`div`,et,[a(d(`input`,{type:`checkbox`,value:e.id,"onUpdate:modelValue":n[38]||=e=>m.selectedFiles=e,class:`card-checkbox`},null,8,tt),[[s,m.selectedFiles]])])]),d(`div`,nt,[d(`div`,rt,[d(`div`,it,[n[81]||=d(`span`,{class:`info-label`},`文件类型`,-1),d(`span`,at,i(m.getFileTypeText(e.fileType)),1)]),d(`div`,ot,[n[82]||=d(`span`,{class:`info-label`},`文件大小`,-1),d(`span`,st,i(m.formatFileSize(e.size)),1)]),d(`div`,ct,[n[83]||=d(`span`,{class:`info-label`},`状态`,-1),d(`span`,{class:f([`status-badge`,`status-${e.status}`])},i(m.getStatusText(e.status)),3)]),d(`div`,lt,[n[84]||=d(`span`,{class:`info-label`},`格式`,-1),d(`span`,ut,i(m.getFormatText(e.format)),1)])]),e.courses.length>0?(t(),o(`div`,dt,[n[85]||=d(`h4`,{class:`section-title`},`相关课程`,-1),d(`div`,ft,[(t(!0),o(h,null,y(e.courses,e=>(t(),o(`div`,{key:e.id,class:`course-item`},i(e.name),1))),128))])])):u(``,!0),e.students.length>0?(t(),o(`div`,pt,[n[86]||=d(`h4`,{class:`section-title`},`相关学员`,-1),d(`div`,mt,[(t(!0),o(h,null,y(e.students.slice(0,4),e=>(t(),o(`div`,{key:e.id,class:`student-avatar-small`,style:r({backgroundColor:m.getAvatarColor(e.name)}),title:e.name},i(m.getInitial(e.name)),13,ht))),128)),e.students.length>4?(t(),o(`div`,gt,` +`+i(e.students.length-4),1)):u(``,!0)])])):u(``,!0),d(`div`,_t,[d(`div`,vt,[n[87]||=d(`span`,{class:`date-label`},`创建日期：`,-1),d(`span`,yt,i(m.formatDate(e.createDate)),1)]),d(`div`,bt,[n[88]||=d(`span`,{class:`date-label`},`更新日期：`,-1),d(`span`,xt,i(m.formatDate(e.updateDate)),1)])])]),d(`div`,St,[d(`div`,Ct,[d(`button`,{class:`action-button small primary`,onClick:t=>m.viewFile(e.id)},` 查看 `,8,wt),d(`button`,{class:`action-button small`,onClick:t=>m.downloadFile(e.id)},` 下载 `,8,Tt),d(`button`,{class:`action-button small`,onClick:t=>m.updateFile(e.id)},` 更新 `,8,Et)])])],2))),128))]))]),m.selectedFiles.length>0?(t(),o(`div`,Dt,[d(`div`,Ot,` 已选择 `+i(m.selectedFiles.length)+` 个文件 `,1),d(`div`,kt,[d(`button`,{class:`action-button`,onClick:n[39]||=(...e)=>m.batchDownload&&m.batchDownload(...e)},`批量下载`),d(`button`,{class:`action-button`,onClick:n[40]||=(...e)=>m.batchArchive&&m.batchArchive(...e)},`批量归档`),d(`button`,{class:`action-button danger`,onClick:n[41]||=(...e)=>m.clearSelection&&m.clearSelection(...e)},`取消选择`)])])):u(``,!0),m.showUploadModal?(t(),o(`div`,{key:1,class:`modal-overlay`,onClick:n[52]||=l((...e)=>m.closeUploadModal&&m.closeUploadModal(...e),[`self`])},[d(`div`,At,[d(`div`,jt,[n[89]||=d(`h3`,null,`上传新文件`,-1),d(`button`,{class:`close-button`,onClick:n[42]||=(...e)=>m.closeUploadModal&&m.closeUploadModal(...e)},`×`)]),d(`div`,Mt,[d(`div`,Nt,[n[90]||=d(`label`,null,`文件名称 *`,-1),a(d(`input`,{type:`text`,"onUpdate:modelValue":n[43]||=e=>m.uploadForm.fileName=e,placeholder:`请输入文件名称`},null,512),[[c,m.uploadForm.fileName]])]),d(`div`,Pt,[n[92]||=d(`label`,null,`文件类型 *`,-1),a(d(`select`,{"onUpdate:modelValue":n[44]||=e=>m.uploadForm.fileType=e},[...n[91]||=[v(`<option value="student_profile" data-v-b6d87d4c>学员档案</option><option value="attendance_record" data-v-b6d87d4c>出勤记录</option><option value="performance_report" data-v-b6d87d4c>成绩报告</option><option value="contract" data-v-b6d87d4c>合同文件</option><option value="certificate" data-v-b6d87d4c>证书文件</option><option value="other" data-v-b6d87d4c>其他文件</option>`,6)]],512),[[_,m.uploadForm.fileType]])]),d(`div`,Ft,[n[93]||=d(`label`,null,`选择课程`,-1),a(d(`select`,{"onUpdate:modelValue":n[45]||=e=>m.uploadForm.selectedCourses=e,multiple:``},[(t(!0),o(h,null,y(m.courses,e=>(t(),o(`option`,{key:e.id,value:e.id},i(e.name),9,It))),128))],512),[[_,m.uploadForm.selectedCourses]])]),d(`div`,Lt,[n[94]||=d(`label`,null,`选择学员`,-1),a(d(`select`,{"onUpdate:modelValue":n[46]||=e=>m.uploadForm.selectedStudents=e,multiple:``},[(t(!0),o(h,null,y(m.students,e=>(t(),o(`option`,{key:e.id,value:e.id},i(e.name)+` (`+i(e.studentId)+`) `,9,Rt))),128))],512),[[_,m.uploadForm.selectedStudents]])]),d(`div`,zt,[n[95]||=d(`label`,null,`文件描述`,-1),a(d(`textarea`,{"onUpdate:modelValue":n[47]||=e=>m.uploadForm.description=e,placeholder:`请输入文件描述（可选）`},null,512),[[c,m.uploadForm.description]])]),d(`div`,Bt,[n[96]||=d(`label`,null,`选择文件 *`,-1),d(`div`,Vt,[d(`input`,{type:`file`,ref:`fileInput`,onChange:n[48]||=(...e)=>m.handleFileSelect&&m.handleFileSelect(...e),style:{display:`none`}},null,544),d(`button`,{type:`button`,class:`upload-button`,onClick:n[49]||=(...e)=>m.triggerFileSelect&&m.triggerFileSelect(...e)},` 点击选择文件 `),m.uploadForm.selectedFile?(t(),o(`span`,Ht,i(m.uploadForm.selectedFile.name),1)):(t(),o(`span`,Ut,` 或拖拽文件到此处 `))])])]),d(`div`,Wt,[d(`button`,{class:`action-button`,onClick:n[50]||=(...e)=>m.closeUploadModal&&m.closeUploadModal(...e)},`取消`),d(`button`,{class:`action-button primary`,onClick:n[51]||=(...e)=>m.submitUpload&&m.submitUpload(...e),disabled:!m.isUploadFormValid},` 确认上传 `,8,Gt)])])])):u(``,!0)])])}var qt=g(x,[[`render`,Kt],[`__scopeId`,`data-v-b6d87d4c`]]);export{qt as default};