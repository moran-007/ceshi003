import{A as e,C as t,N as n,O as r,_ as i,d as a,f as o,g as s,h as c,j as l,k as u,m as d,r as f,s as p}from"./index-D-ACJEW6.js";var m={name:`StudentProfile`,setup(){let t=d(()=>f.studentData||f.username?{username:f.username,studentId:f.studentData?.studentId,role:f.role,class:f.studentData?.class}:{username:`张三`,studentId:`20210001`,role:`学生`,class:`计算机科学与技术 2021级一班`}),n=e(``),r=e(``),i=e(``),a=e(!1),o=e(!1),s=u({currentPassword:``,newPassword:``,confirmPassword:``}),c=e=>!e||e.length<6?`密码长度不能少于6位`:!/[A-Za-z]/.test(e)||!/[0-9]/.test(e)?`密码必须包含字母和数字`:``,l=()=>{let e=!0;s.currentPassword=``,s.newPassword=``,s.confirmPassword=``,n.value!==`123456`&&(s.currentPassword=`当前密码错误`,e=!1);let t=c(r.value);return t&&(s.newPassword=t,e=!1),r.value!==i.value&&(s.confirmPassword=`两次输入的密码不一致`,e=!1),e};return{userState:f,userData:t,currentPassword:n,newPassword:r,confirmPassword:i,isSubmitting:a,showSuccess:o,errors:s,handlePasswordChange:async()=>{if(l())try{a.value=!0,await new Promise(e=>setTimeout(e,1e3)),o.value=!0,n.value=``,r.value=``,i.value=``,setTimeout(()=>{o.value=!1},3e3)}catch(e){console.error(`密码修改失败:`,e)}finally{a.value=!1}}}}},h={class:`student-profile`},g={class:`profile-content`},_={class:`info-card`},v={class:`info-grid`},y={class:`info-item`},b={class:`info-item`},x={class:`info-item`},S={class:`info-item`},C={class:`password-card`},w={class:`form-group`},T={key:0,class:`error-message`},E={class:`form-group`},D={key:0,class:`error-message`},O={class:`form-group`},k={key:0,class:`error-message`},A={class:`form-actions`},j=[`disabled`],M={key:0,class:`success-message`};function N(e,u,d,f,p,m){return t(),i(`div`,h,[u[13]||=c(`div`,{class:`profile-header`},[c(`h2`,null,`个人中心`)],-1),c(`div`,g,[c(`div`,_,[u[8]||=c(`h3`,null,`个人信息`,-1),c(`div`,v,[c(`div`,y,[u[4]||=c(`label`,null,`用户名:`,-1),c(`span`,null,n(f.userData.username),1)]),c(`div`,b,[u[5]||=c(`label`,null,`学生ID:`,-1),c(`span`,null,n(f.userData.studentId),1)]),c(`div`,x,[u[6]||=c(`label`,null,`角色:`,-1),c(`span`,null,n(f.userData.role),1)]),c(`div`,S,[u[7]||=c(`label`,null,`班级:`,-1),c(`span`,null,n(f.userData.class),1)])])]),c(`div`,C,[u[12]||=c(`h3`,null,`修改密码`,-1),c(`form`,{onSubmit:u[3]||=o((...e)=>f.handlePasswordChange&&f.handlePasswordChange(...e),[`prevent`]),class:`password-form`},[c(`div`,w,[u[9]||=c(`label`,{for:`currentPassword`},`当前密码`,-1),r(c(`input`,{type:`password`,id:`currentPassword`,"onUpdate:modelValue":u[0]||=e=>f.currentPassword=e,required:``,placeholder:`请输入当前密码`,class:l({error:f.errors.currentPassword})},null,2),[[a,f.currentPassword]]),f.errors.currentPassword?(t(),i(`span`,T,n(f.errors.currentPassword),1)):s(``,!0)]),c(`div`,E,[u[10]||=c(`label`,{for:`newPassword`},`新密码`,-1),r(c(`input`,{type:`password`,id:`newPassword`,"onUpdate:modelValue":u[1]||=e=>f.newPassword=e,required:``,placeholder:`请输入新密码`,class:l({error:f.errors.newPassword})},null,2),[[a,f.newPassword]]),f.errors.newPassword?(t(),i(`span`,D,n(f.errors.newPassword),1)):s(``,!0)]),c(`div`,O,[u[11]||=c(`label`,{for:`confirmPassword`},`确认新密码`,-1),r(c(`input`,{type:`password`,id:`confirmPassword`,"onUpdate:modelValue":u[2]||=e=>f.confirmPassword=e,required:``,placeholder:`请确认新密码`,class:l({error:f.errors.confirmPassword})},null,2),[[a,f.confirmPassword]]),f.errors.confirmPassword?(t(),i(`span`,k,n(f.errors.confirmPassword),1)):s(``,!0)]),c(`div`,A,[c(`button`,{type:`submit`,class:`btn-submit`,disabled:f.isSubmitting},n(f.isSubmitting?`提交中...`:`确认修改`),9,j)])],32),f.showSuccess?(t(),i(`div`,M,` 密码修改成功！ `)):s(``,!0)])])])}var P=p(m,[[`render`,N],[`__scopeId`,`data-v-54b37f57`]]);export{P as default};