import{A as e,C as t,M as n,N as r,_ as i,a,g as o,h as s,i as c,j as l,m as u,o as ee,p as d,s as f,w as p,x as m}from"./index-D-ACJEW6.js";var h={name:`CourseDetails`,props:{courseId:{type:Number,default:1}},setup(t){let n=a(),r=ee(),i=e(!1),o=u(()=>parseInt(n.params.id||t.courseId)||1),s=u(()=>{if(c.mockData&&c.mockData.courses){let e=c.mockData.courses.find(e=>e.courseId===o.value);if(e)return c.mockData.scores&&(e.scores=c.mockData.scores.filter(e=>e.course_id===o.value)),{id:e.courseId,courseName:e.name,teacherName:e.teacherName,classTime:`周一 08:00-10:00`,location:`A101`,credits:e.credit,totalHours:e.totalHours,remainingHours:e.remainingHours,progressPercentage:e.progress,syllabus:p(),recentAttendance:h(),scores:e.scores||[]}}let e={1:{id:1,courseName:`数据结构`,teacherName:`张老师`,classTime:`周一 08:00-10:00`,location:`A101`,credits:4,totalHours:48,remainingHours:12,progressPercentage:75,description:`本课程主要介绍数据结构的基本概念、算法和应用。`,syllabus:p(),recentAttendance:h(),scores:[{exam_type:`midterm`,exam_type_text:`期中考试`,score_value:85,exam_date:`2023-10-15`,remarks:`表现良好`},{exam_type:`quiz`,exam_type_text:`课堂测验`,score_value:92,exam_date:`2023-09-25`,remarks:`优秀！`}]},2:{id:2,courseName:`操作系统`,teacherName:`李老师`,classTime:`周二 14:00-16:00`,location:`B202`,credits:4,totalHours:48,remainingHours:18,progressPercentage:63,description:`本课程介绍操作系统的基本原理和设计方法。`,syllabus:p(),recentAttendance:h(),scores:[{exam_type:`midterm`,exam_type_text:`期中考试`,score_value:78,exam_date:`2023-10-10`,remarks:`需要加强练习`}]},3:{id:3,courseName:`计算机网络`,teacherName:`王老师`,classTime:`周三 09:00-11:00`,location:`C303`,credits:3,totalHours:36,remainingHours:22,progressPercentage:39,description:`本课程介绍计算机网络的基本概念、原理和技术。`,syllabus:p(),recentAttendance:h(),scores:[{exam_type:`assignment`,exam_type_text:`课后作业`,score_value:88,exam_date:`2023-09-30`,remarks:`作业完成质量较高`}]},4:{id:4,courseName:`数据库原理`,teacherName:`刘老师`,classTime:`周四 10:00-12:00`,location:`D404`,credits:3,totalHours:36,remainingHours:8,progressPercentage:78,description:`本课程介绍数据库系统的基本概念、原理和技术。`,syllabus:p(),recentAttendance:h(),scores:[{exam_type:`midterm`,exam_type_text:`期中考试`,score_value:65,exam_date:`2023-10-12`,remarks:`及格，需要加强理解概念`}]}};return e[o.value]||e[1]}),l=u(()=>{let e=[],t=new Date;for(let n=0;n<5;n++){let r=new Date(t);r.setDate(t.getDate()+(8-t.getDay()+n*7)%7),e.push({id:n+1,date:r,time:`08:00-10:00`,location:`A101`,teacherName:s.value.teacherName||`张老师`,content:`第${n+1}章节内容: ${s.value.courseName}进阶知识`})}return e}),d=u(()=>s.value.scores&&s.value.scores.length>0?s.value.scores:S()),f=u(()=>[{id:1,name:`${s.value.courseName}课程大纲.pdf`,type:`文档`,size:`1.2MB`,date:`2023-09-01`,url:`#`},{id:2,name:`第1章课件.ppt`,type:`演示文稿`,size:`3.5MB`,date:`2023-09-05`,url:`#`},{id:3,name:`课后习题.docx`,type:`文档`,size:`850KB`,date:`2023-09-10`,url:`#`},{id:4,name:`实验指导书.pdf`,type:`文档`,size:`2.3MB`,date:`2023-09-15`,url:`#`}]),p=()=>[{title:`第一章：课程概述`,status:`completed`,details:`介绍课程基本内容、学习方法和考核要求`},{title:`第二章：基础理论`,status:`in-progress`,details:`深入讲解课程核心概念和基础理论`},{title:`第三章：应用实践`,status:`not-started`,details:`通过实际案例讲解理论知识的应用`},{title:`第四章：高级技巧`,status:`not-started`,details:`介绍课程相关的高级应用技巧`}],h=()=>[{date:`2024-01-15`,time:`08:00-10:00`,status:`present`,note:`正常出勤`},{date:`2024-01-08`,time:`08:00-10:00`,status:`present`,note:`正常出勤`},{date:`2024-01-01`,time:`08:00-10:00`,status:`late`,note:`迟到15分钟`}],g=e=>{if(!e)return``;let t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}-${String(t.getDate()).padStart(2,`0`)}`},_=e=>({ongoing:`status-ongoing`,completed:`status-completed`,upcoming:`status-upcoming`})[e]||``,v=e=>({ongoing:`进行中`,completed:`已完成`,upcoming:`未开始`})[e]||`未知`,y=e=>e>=90?`grade-excellent`:e>=80?`grade-good`:e>=60?`grade-pass`:`grade-fail`,b=e=>({文档:`📄`,演示文稿:`📊`,视频:`🎬`,音频:`🎵`,图片:`🖼️`,代码:`💻`})[e]||`📎`,x=e=>{console.log(`下载资源:`,e.name),alert(`正在下载: ${e.name}`)},S=()=>[{exam_type:`midterm`,exam_type_text:`期中考试`,score_value:85,exam_date:`2023-10-15`,remarks:`表现良好，继续加油！`},{exam_type:`quiz`,exam_type_text:`课堂测验`,score_value:92,exam_date:`2023-09-25`,remarks:`优秀！`},{exam_type:`assignment`,exam_type_text:`课后作业`,score_value:88,exam_date:`2023-09-30`,remarks:`作业完成质量较高`}],C=()=>{r.push(`/home/student/dashboard`)},w=()=>{console.log(`Loading course data for ID:`,o.value)};return m(()=>{w()}),{courseDetails:s,isLoading:i,courseSchedule:l,courseGrades:d,learningResources:f,loadCourseData:w,goBack:C,formatDate:g,getCourseStatusClass:_,getCourseStatusText:v,getGradeClass:y,getResourceIcon:b,downloadResource:x}}},g={class:`course-details`},_={class:`details-header`},v={key:0,class:`loading-container`},y={key:1,class:`course-content`},b={class:`course-info-card`},x={class:`info-header`},S={class:`info-grid`},C={class:`info-item`},w={class:`info-item`},T={class:`info-item`},E={class:`info-item`},D={class:`info-item`},O={class:`info-item`},k={key:0,class:`course-description`},A={class:`progress-section`},j={class:`progress-container`},M={class:`progress-bar`},N={class:`progress-text`},P={class:`syllabus-card`},F={class:`syllabus-content`},I={class:`chapter-header`},L={key:0,class:`chapter-details`},R={class:`grades-card`},z={class:`grades-table-container`},B={class:`grades-table`},V={key:0,class:`empty-grades`},H={class:`schedule-card`},U={class:`schedule-list`},te={class:`schedule-header`},W={class:`session-date`},G={class:`session-time`},K={class:`schedule-details`},q={class:`location`},J={class:`teacher`},Y={class:`content`},X={class:`attendance-card`},Z={class:`attendance-list`},Q={class:`attendance-info`},ne={class:`attendance-date`},re={class:`attendance-time`},ie={class:`attendance-status`},ae={key:0,class:`attendance-note`},oe={class:`resources-card`},se={class:`resources-list`},ce={class:`resource-icon`},le={class:`resource-info`},ue={class:`resource-name`},de={class:`resource-meta`},fe={class:`resource-type`},pe={class:`resource-size`},$={class:`resource-date`},me=[`onClick`],he={key:2,class:`error-message`};function ge(e,a,c,u,ee,f){return t(),i(`div`,g,[s(`div`,_,[s(`button`,{onClick:a[0]||=(...e)=>u.goBack&&u.goBack(...e),class:`back-button`},[...a[2]||=[s(`span`,null,`← 返回仪表盘`,-1)]]),s(`h2`,null,r(u.courseDetails.courseName),1)]),u.isLoading?(t(),i(`div`,v,[...a[3]||=[s(`div`,{class:`loading-spinner`},null,-1),s(`p`,null,`加载中...`,-1)]])):u.courseDetails?(t(),i(`div`,y,[s(`div`,b,[s(`div`,x,[a[4]||=s(`h3`,null,`课程信息`,-1),u.courseDetails.status?(t(),i(`span`,{key:0,class:l([`course-status`,u.getCourseStatusClass(u.courseDetails.status)])},r(u.getCourseStatusText(u.courseDetails.status)),3)):o(``,!0)]),s(`div`,S,[s(`div`,C,[a[5]||=s(`label`,null,`授课教师:`,-1),s(`span`,null,r(u.courseDetails.teacherName),1)]),s(`div`,w,[a[6]||=s(`label`,null,`上课时间:`,-1),s(`span`,null,r(u.courseDetails.classTime),1)]),s(`div`,T,[a[7]||=s(`label`,null,`上课地点:`,-1),s(`span`,null,r(u.courseDetails.location),1)]),s(`div`,E,[a[8]||=s(`label`,null,`课程学分:`,-1),s(`span`,null,r(u.courseDetails.credits)+` 学分`,1)]),s(`div`,D,[a[9]||=s(`label`,null,`总课时:`,-1),s(`span`,null,r(u.courseDetails.totalHours)+` 课时`,1)]),s(`div`,O,[a[10]||=s(`label`,null,`剩余课时:`,-1),s(`span`,null,r(u.courseDetails.remainingHours)+` 课时`,1)])]),u.courseDetails.description?(t(),i(`div`,k,[a[11]||=s(`h4`,null,`课程简介`,-1),s(`p`,null,r(u.courseDetails.description),1)])):o(``,!0),s(`div`,A,[a[12]||=s(`h4`,null,`学习进度`,-1),s(`div`,j,[s(`div`,M,[s(`div`,{class:`progress-fill`,style:n({width:u.courseDetails.progressPercentage+`%`})},null,4)]),s(`span`,N,r(u.courseDetails.progressPercentage)+`%`,1)])])]),s(`div`,P,[a[13]||=s(`h3`,null,`课程大纲`,-1),s(`div`,F,[(t(!0),i(d,null,p(u.courseDetails.syllabus,(e,n)=>(t(),i(`div`,{key:n,class:`syllabus-chapter`},[s(`div`,I,[s(`h4`,null,r(e.title),1),s(`span`,{class:l([`chapter-status`,e.status])},r(e.status===`completed`?`已完成`:e.status===`in-progress`?`进行中`:`未开始`),3)]),e.details?(t(),i(`div`,L,[s(`p`,null,r(e.details),1)])):o(``,!0)]))),128))])]),s(`div`,R,[a[16]||=s(`h3`,null,`成绩记录`,-1),s(`div`,z,[s(`table`,B,[a[14]||=s(`thead`,null,[s(`tr`,null,[s(`th`,null,`考试类型`),s(`th`,null,`分数`),s(`th`,null,`考试日期`),s(`th`,null,`教师评价`)])],-1),s(`tbody`,null,[(t(!0),i(d,null,p(u.courseGrades,e=>(t(),i(`tr`,{key:e.exam_type},[s(`td`,null,r(e.exam_type_text),1),s(`td`,{class:l(u.getGradeClass(e.score_value))},r(e.score_value),3),s(`td`,null,r(e.exam_date),1),s(`td`,null,r(e.remarks||`无`),1)]))),128))])]),u.courseGrades.length===0?(t(),i(`div`,V,[...a[15]||=[s(`p`,null,`暂无成绩记录`,-1)]])):o(``,!0)])]),s(`div`,H,[a[17]||=s(`h3`,null,`近期课程安排`,-1),s(`div`,U,[(t(!0),i(d,null,p(u.courseSchedule,e=>(t(),i(`div`,{key:e.id,class:`schedule-item`},[s(`div`,te,[s(`span`,W,r(u.formatDate(e.date)),1),s(`span`,G,r(e.time),1)]),s(`div`,K,[s(`span`,q,`🏫 `+r(e.location),1),s(`span`,J,`👨‍🏫 `+r(e.teacherName),1),s(`span`,Y,`📝 `+r(e.content),1)])]))),128))])]),s(`div`,X,[a[18]||=s(`h3`,null,`最近出勤记录`,-1),s(`div`,Z,[(t(!0),i(d,null,p(u.courseDetails.recentAttendance,(e,n)=>(t(),i(`div`,{key:n,class:`attendance-item`},[s(`div`,Q,[s(`span`,ne,r(e.date),1),s(`span`,re,r(e.time),1)]),s(`div`,ie,[s(`span`,{class:l([`status-badge`,e.status])},r(e.status===`present`?`出勤`:e.status===`late`?`迟到`:`缺勤`),3),e.note?(t(),i(`span`,ae,r(e.note),1)):o(``,!0)])]))),128))])]),s(`div`,oe,[a[19]||=s(`h3`,null,`学习资源`,-1),s(`div`,se,[(t(!0),i(d,null,p(u.learningResources,e=>(t(),i(`div`,{key:e.id,class:`resource-item`},[s(`div`,ce,r(u.getResourceIcon(e.type)),1),s(`div`,le,[s(`div`,ue,r(e.name),1),s(`div`,de,[s(`span`,fe,r(e.type),1),s(`span`,pe,r(e.size),1),s(`span`,$,r(e.date),1)])]),s(`button`,{class:`download-button`,onClick:t=>u.downloadResource(e)},` 下载 `,8,me)]))),128))])])])):(t(),i(`div`,he,[a[20]||=s(`p`,null,`无法加载课程详情`,-1),s(`button`,{onClick:a[1]||=(...e)=>u.loadCourseData&&u.loadCourseData(...e),class:`retry-button`},`重试`)]))])}var _e=f(h,[[`render`,ge],[`__scopeId`,`data-v-fa12b9c8`]]);export{_e as default};